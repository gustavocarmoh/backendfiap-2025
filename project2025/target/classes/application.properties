# See http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
spring.thymeleaf.cache=false
logging.level.jdbc=OFF
logging.level.jdbc.sqltiming=DEBUG
logging.level.jdbc.resultsettable=DEBUG

# Propriedades base da aplicação (padrões podem ser sobrescritos por variáveis de ambiente)

# Datasource (alinhado ao docker-compose / devcontainer)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:oracle:thin:@oracle:1521/XEPDB1}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:nutrixpert}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:NutriXpert2025!}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# JPA / Hibernate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=none

# Flyway
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# LLM (valores default podem ser sobrescritos por variáveis de ambiente)
llm.api.url=${LLM_API_URL:https://api.openai.com/v1/chat/completions}
llm.api.key=${LLM_API_KEY:}
llm.api.model=${LLM_MODEL:gpt-4o-mini}
llm.optimization.model=${LLM_OPTIMIZATION_MODEL:${LLM_MODEL:gpt-4o-mini}}
llm.request.timeout.seconds=${LLM_REQUEST_TIMEOUT_SECONDS:30}

# HikariCP - defaults úteis para Oracle (ajustáveis via env/properties)
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.leak-detection-threshold=2000

springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Configurações avançadas do SpringDoc
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.display-operation-id=true
springdoc.swagger-ui.default-models-expand-depth=1
springdoc.swagger-ui.default-model-expand-depth=1
springdoc.swagger-ui.doc-expansion=none
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.use-root-path=true

# Exclusões - não incluir controladores de documentação
springdoc.packages-to-exclude=fiap.backend.controller.DocumentationController,fiap.backend.controller.SpringDocController
springdoc.paths-to-exclude=/api/v1/docs/**,/api/v1/springdoc/**,/swagger-ui/**,/v3/api-docs/**,/api-docs/**

# Configurações de interface
springdoc.swagger-ui.operations-sorter=alpha
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true

# Configurações para upload de arquivos
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.file-size-threshold=2KB

# Configurações personalizadas da aplicação
app.upload.max-file-size=5242880
app.upload.allowed-types=image/jpeg,image/jpg,image/png,image/gif
app.default-photo.url=/api/photos/default